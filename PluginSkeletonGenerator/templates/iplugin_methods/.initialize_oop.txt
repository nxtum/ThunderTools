string message;

ASSERT (_service == nullptr);
ASSERT (service != nullptr);
ASSERT (_implementation == nullptr);
ASSERT (_connectionId == 0);

_service = service;
_service->AddRef();
_service->Register(&_connectionNotification);

// Example
_implementation = service->Root<Exchange::{{COMRPC}}>(_connectionId, 2000, _T("{{PLUGIN_NAME}}Implementation"));
if (_implementation == nullptr) {
~INDENT_INCREASE~
    message = _T("Couldn't create instance");
~INDENT_DECREASE~
} else {
~INDENT_INCREASE~
    // Add registration e.g:
    //_implementation->Register(&_volumeNotification);
    {{JSONRPC_REGISTER}}
~INDENT_DECREASE~
}

return (message);